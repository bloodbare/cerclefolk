<div class="faceted-widget faceted-viewseletor-widget"
    i18n:domain="apuntador.theme" 
    tal:define="error_view nocall:context/@@faceted.widget.error;
                wid python:view.data.getId();
                hidden python:view.hidden;
                css string:faceted-widget faceted-viewseletor-widget;
                css python:hidden and css + ' faceted-widget-hidden' or css;"
    tal:attributes="id string:${wid}_widget; class css">

    <fieldset class="widget-fieldset">

        <div class="row-fluid collapse in" id="viewselector_collapse">
            <div class="span10 text_widget" i18n:translate="">
                Propers esdeveniments
            </div>
            <div class="span2 icons_widget">
                <a href="#" class="change_view_link view1 selected">
                    <!-- <i class="fa fa-list"></i> -->
                    <img src="++resource++apuntador.theme.images/list_view.png" />
                </a>
                <a href="#" class="change_view_link view2">
                    <!-- <i class="fa fa-th"></i> -->
                    <img src="++resource++apuntador.theme.images/squares_view.png" />
                </a>
            </div>
        </div>

        <script type="text/javascript">
            jQuery(document).ready(function($) {

                function view_selector(element) {
                    $(".change_view_link").removeClass("selected");
                    $(element).addClass("selected");

                    if($(element).hasClass("view1")) {
                        $(".item_wrapper").removeClass("span4 view2");
                        $(".item_wrapper").addClass("span12 view1");
                        $(".item_wrapper .foto").removeClass("span12");
                        $(".item_wrapper .foto").addClass("span3");
                        $(".item_wrapper .tags_titol_lloc_data").removeClass("span12");
                        $(".item_wrapper .tags_titol_lloc_data").addClass("span9");
                    } else {
                        $(".item_wrapper").removeClass("span12 view1");
                        $(".item_wrapper").addClass("span4 view2");
                        $(".item_wrapper .foto").removeClass("span3");
                        $(".item_wrapper .foto").addClass("span12");
                        $(".item_wrapper .tags_titol_lloc_data").removeClass("span9");
                        $(".item_wrapper .tags_titol_lloc_data").addClass("span12");
                    }                
                }

                $(".change_view_link").on("click",function (e) {
                    e.preventDefault();
                    view_selector($(this));
                });

                $(Faceted.Events).on(Faceted.Events.AJAX_QUERY_SUCCESS, function(e) {
                    $(".change_view_link.selected").click();
                }) 


            });
        </script>

    </fieldset>
</div>

<script type="text/javascript">

</script>
